<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <head><meta charset="utf-8"/></head>
    <h:form>
        <f:view contentType="text/html">
            <h:head>
                <f:facet name="first">
                    <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                    <title>LremapAsGraph</title>
                </f:facet>
            </h:head>

            <h:body>

                <p:layout fullPage="true">

                    <p:layoutUnit position="north" size="180" resizable="true" closable="true" collapsible="true" >
                        <!--                        <p>Filter parameters:</p>-->
                        <h:panelGrid columns="12" cellpadding="5" id="display">
                            <p:outputLabel value="Author:" for="selAuthor" />
                            <p:inputText value="#{lremapasgraphManagedBeanView.author}" readonly="true" id="selAuthor"/>
                            <p:outputLabel value="Resource:" for="selName" />
                            <p:inputText value="#{lremapasgraphManagedBeanView.name}" readonly="true" id="selName"/>
                            <p:outputLabel value="Family:" for="selFamily" />
                            <p:inputText value="#{lremapasgraphManagedBeanView.family}" readonly="true" id="selFamily"/>
                            <p:outputLabel value="Type:" for="selType" />
                            <p:inputText value="#{lremapasgraphManagedBeanView.type}" readonly="true" id="selType"/>
                            <p:outputLabel value="Conference (year):" for="selCy" />
                            <p:inputText value="#{lremapasgraphManagedBeanView.conf_year}" readonly="true" id="selCy"/>
                            <p:outputLabel value="View in a new Tab:" for="extView" />
                            <p:link outcome="output.xhtml" id="extView" value="External Viewer" target="_blank"/>

                        </h:panelGrid>
                        <p:separator></p:separator>
                        <h:panelGrid columns="6" cellpadding="2" id="log">
                            <p:outputLabel value="Data log:" for="tLog" />
                            <p:inputTextarea id="tLog" rows="3" cols="55" readonly="true" autoResize="false" value="#{lremapasgraphManagedBeanView.theLog}"/>
                            <p:outputLabel value="File log:" for="fLog" />
                            <p:inputTextarea id="fLog" rows="3" cols="55" readonly="true" autoResize="false" value="#{lremapasgraphManagedBeanView.theLog4File}"/>
                            <p:outputLabel value="Structure log:" for="sLog" />
                            <p:inputTextarea id="sLog" rows="3" cols="55" readonly="true" autoResize="false" value="#{lremapasgraphManagedBeanView.theLog4Structure}"/>

                        </h:panelGrid>


                    </p:layoutUnit>

                    <p:layoutUnit position="south" size="50" closable="true" collapsible="true">

                    </p:layoutUnit>

                    <p:layoutUnit position="west" size="450" header="Filter parameters" collapsible="true">
                        <h3 style="margin-top:0">Select your visualization</h3>
                        <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                            <p:outputLabel for="vis" value="Visualization:" />
                            <p:selectOneRadio id="vis" value="#{lremapasgraphManagedBeanView.vis}">
                                <f:selectItem itemLabel="Author 2 Author Connection via Resource" itemValue="a2avr"/>
                                <f:selectItem itemLabel="Resource 2 Resource Connection via Author" itemValue="r2rva" />
                            </p:selectOneRadio>
                        </h:panelGrid>
                        <h:panelGrid columns="2" cellpadding="5">


                            <p:outputLabel value="Author:" for="acAuthor" />
                            <p:autoComplete id="acAuthor" value="#{lremapasgraphManagedBeanView.author}"  
                                            style="width:320px" 
                                            completeMethod="#{lremapasgraphManagedBeanView.completeAuthors}" 
                                            minQueryLength="3" 
                                            autocomplete="true" forceSelection="true" size="30"
                                            placeholder='Type 3 chars to start autocompletion'/>
                            <p:separator></p:separator><p:separator></p:separator>

                            <p:outputLabel value="Resource:" for="acName" />
                            <p:autoComplete id="acName" value="#{lremapasgraphManagedBeanView.name}"  
                                            style="width:320px" 
                                            completeMethod="#{lremapasgraphManagedBeanView.completeNames}" 
                                            minQueryLength="3" 
                                            autocomplete="true" forceSelection="true" size="30"
                                            placeholder='Type 3 chars to start autocompletion'/>
                            <p:separator></p:separator><p:separator></p:separator>
                            <p:outputLabel for="acFamily" value="Family:" />


                            <p:selectOneMenu id="acFamily" value="#{lremapasgraphManagedBeanView.family}" style="width:320px" filter="true" filterMatchMode="contains" >
                                <f:selectItem itemLabel="Select a Family" itemValue="" noSelectionOption="true" />
                                <f:selectItems value="#{lremapasgraphManagedBeanView.families}" />
                            </p:selectOneMenu>

                            <p:separator></p:separator><p:separator></p:separator>
                            <p:outputLabel for="acType" value="Type:" />


                            <p:selectOneMenu id="acType" value="#{lremapasgraphManagedBeanView.type}" style="width:320px" filter="true" filterMatchMode="contains" >
                                <f:selectItem itemLabel="Select a Type" itemValue="" noSelectionOption="true" />
                                <f:selectItems value="#{lremapasgraphManagedBeanView.types}" />
                            </p:selectOneMenu>

                            <p:separator></p:separator><p:separator></p:separator>
                            <p:outputLabel for="acCy" value="Conference (year):" />


                            <p:selectOneMenu id="acCy" value="#{lremapasgraphManagedBeanView.conf_year}" style="width:320px" filter="true" filterMatchMode="contains" >
                                <f:selectItem itemLabel="Select a Conference (Year)" itemValue="" noSelectionOption="true" />
                                <f:selectItems value="#{lremapasgraphManagedBeanView.confs_years}" />
                            </p:selectOneMenu>
                        </h:panelGrid>
                        <p:separator />

<!--                        <p:commandButton onstart="PF('loadingDialog').show()" value="Submit" update="display tLog fLog sLog"  icon="ui-icon-check" action="#{lremapasgraphManagedBeanView.filterAndSearch()}" oncomplete="
                                         
                                         var iframe = document.getElementById('graph');
                                         iframe.src = iframe.src;
                                         


                                         "/>-->

                        <p:commandButton value="Submit" onstart="PF('loadingDialog').show()" update="tLog fLog sLog display"  icon="ui-icon-check" action="#{lremapasgraphManagedBeanView.filterAndSearch()}"  oncomplete="
                                         
                                         var iframe = document.getElementById('graph');
                                         
                                         iframe.src = iframe.src;
                                         PF('loadingDialog').hide()
                                         "/>

                    </p:layoutUnit>

                    <p:layoutUnit position="center" >
                        <iframe src="http://pcdelgratta:8080/lremapasgraph/faces/output.xhtml" width="100%" height="100%" id="graph"></iframe> 
                    </p:layoutUnit>

                </p:layout>

            </h:body>

        </f:view>
    </h:form>
    <p:dialog widgetVar="loadingDialog" styleClass="loadingDialog" modal="true" closable="false" resizable="false">
        <p:outputLabel styleClass="loadingLabel" value="Loading"/>
        <p:graphicImage styleClass="loadingImage" name="waiting.gif"/>
    </p:dialog>
</html>

